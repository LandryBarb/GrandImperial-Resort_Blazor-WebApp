@page "/"
@inject HttpClient http

<PageTitle>Home</PageTitle>
<!--Home Page-->
<!--SEction 1 -->
<!--Video-->
<div class="video_wrapper">
    <div class="video_text">
        <h2>Live The Grand Life</h2>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit.</p>

    </div>
    <video playsinline autoplay muted loop id="intro-video">
        <source src="../video/intro-video.mp4" type="video/mp4">
    </video>
</div>
<!--End Video-->
<!--End SEction 1 -->

<!--SEction 2 About -->

<section class="about_section">
    <article class="about_section_container">
        <h3 class="about_section_heading">
            Our Resort History
        </h3>
        <DividerComponent />
        <p>
            Founded in 1802 the Grand Imperial Resort is the ideal ski resort located on the snow covered mountains of
            Silver Hills, Co...
        </p>
        <a href="/about" class="about_section_btn btn">
            Read More
            <i class="fas fa-angle-double-right btn-arrow"></i>
        </a>
    </article>
    <div class="about_section_img_container">
        <div class="img_1 img">
            <img src="../images/home/section-2/img1.jpg" alt="image 1">
        </div>
        <div class="img_2 img">
            <img src="../images/home/section-2/img2.jpg" alt="image 2">
        </div>
        <div class="img_3 img">
            <img src="../images/home/section-2/img3.jpg" alt="image 1">
        </div>
        <div class="img_4 img">
            <img src="../images/home/section-2/img4.jpg" alt="image 2">
        </div>
    </div>

</section>
<!--End SEction 2 -->

<!--Home Page - Section 3  Rooms -->
<section class="rooms" id="rooms">
    <CommonHeaderComponent Title="Accomadtions" />
    <DividerComponent />

    @if (hotelRooms == null)
    {
        <p>Loading ...</p>
    }
    else
    {

        <RoomDetails HotelRoom="selectedRoom" />
        <div class="rooms_cards_wrapper">
            @foreach (var room in hotelRooms)
            {
                <HotelRoomCard Room="room" OnSelected="HandleRoomSelected" />
            }

        </div>
    }
            @* <div class="rooms_btn_wrapper">
                <a href="" class="rooms_btn">
                Check All Rooms
                </a>
                </div> *@

    <ButtonComponent CssClass="rooms_btn_wrapper" NavDir="/" LinkClass="rooms_btn" Name="Check All Rooms" />
</section>

<!--End - Section 3  Rooms -->


<!--End Home Page-->

@code {
    private IEnumerable<HotelRoom>? hotelRooms;
    private HotelRoom? selectedRoom;

    protected override async Task OnInitializedAsync()
    {
        try
        {
            hotelRooms = await http.GetFromJsonAsync<IEnumerable<HotelRoom>>("data/hotel-room.json");
        }
        catch (HttpRequestException ex)
        {

            System.Console.WriteLine($"There was a problem loading the room data: {ex.Message}");
        }
    }

    private void HandleRoomSelected(HotelRoom room)

    => selectedRoom = room;


}
